# üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

## –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å Telegram-–±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram, –Ω–∞–π–¥–∏—Ç–µ **@BotFather** (—Å —Å–∏–Ω–µ–π –≥–∞–ª–æ—á–∫–æ–π)
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –í–≤–µ–¥–∏—Ç–µ **–æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è** –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `AI Melody`)
4. –í–≤–µ–¥–∏—Ç–µ **username** –±–æ—Ç–∞ (–¥–æ–ª–∂–µ–Ω –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ `bot`, –Ω–∞–ø—Ä–∏–º–µ—Ä: `ai_melody_bot`)
5. BotFather –≤—ã–¥–∞—Å—Ç **API Token** ‚Äî —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ, —ç—Ç–æ –≤–∞—à `BOT_TOKEN`

```
–ü—Ä–∏–º–µ—Ä —Ç–æ–∫–µ–Ω–∞: 7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ –≤ BotFather

–û—Ç–ø—Ä–∞–≤—å—Ç–µ `/mybots` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞ ‚Üí **Bot Settings**:

- **Edit Description** ‚Üí –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
  ```
  üéµ –ì–µ–Ω–µ—Ä–∏—Ä—É—é –º—É–∑—ã–∫—É —Å –ø–æ–º–æ—â—å—é –ò–ò ‚Äî –ª—é–±–æ–π –∂–∞–Ω—Ä, —Å –≤–æ–∫–∞–ª–æ–º –∏–ª–∏ –±–µ–∑. –ù–∞–∂–º–∏—Ç–µ Start!
  ```

- **Edit About** ‚Üí –∫–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ:
  ```
  AI Music Generator ‚Äî AI Melody
  ```

- **Edit Commands** ‚Üí –≤—Å—Ç–∞–≤—å—Ç–µ:
  ```
  start - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
  create - –°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–∫
  balance - –ú–æ–π –±–∞–ª–∞–Ω—Å
  history - –ú–æ–∏ —Ç—Ä–µ–∫–∏
  buy - –ö—É–ø–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã
  help - –ü–æ–º–æ—â—å
  ```

### –í–∫–ª—é—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π Stars

–í BotFather: `/mybots` ‚Üí –≤–∞—à –±–æ—Ç ‚Üí **Bot Settings** ‚Üí **Payments**

> [!IMPORTANT]
> –î–ª—è Telegram Stars **–Ω–µ –Ω—É–∂–µ–Ω** –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–ª–∞—Ç—ë–∂–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä. Stars —Ä–∞–±–æ—Ç–∞—é—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" —á–µ—Ä–µ–∑ Bot API. –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç invoice —Å `currency="XTR"` ‚Äî Telegram —Å–∞–º –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–ø–ª–∞—Ç—ã.

Telegram **—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç** –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
- `/paysupport` ‚Äî –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º
- `/support` ‚Äî –æ–±—â–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞  
- `/terms` ‚Äî —É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## –®–∞–≥ 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ Kie.ai

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://kie.ai](https://kie.ai)
2. –ù–∞–∂–º–∏—Ç–µ **Sign Up** ‚Üí —Å–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç (email + –ø–∞—Ä–æ–ª—å, –∏–ª–∏ —á–µ—Ä–µ–∑ Google)
3. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ä–∞–∑–¥–µ–ª **API Keys** (–æ–±—ã—á–Ω–æ –≤ Dashboard –∏–ª–∏ –ø—Ä–æ—Ñ–∏–ª–µ)
4. –ù–∞–∂–º–∏—Ç–µ **Generate API Key** ‚Üí —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á, —ç—Ç–æ –≤–∞—à `SUNO_API_KEY`

```
–ü—Ä–∏–º–µ—Ä –∫–ª—é—á–∞: sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
```

### –°—Ç–æ–∏–º–æ—Å—Ç—å
- ~$0.06 –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é (2 —Ç—Ä–µ–∫–∞)
- –û–ø–ª–∞—Ç–∞ –ø–æ —Ñ–∞–∫—Ç—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (pay-as-you-go)
- –ï—Å—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π trial –¥–ª—è —Ç–µ—Å—Ç–æ–≤

> [!TIP]
> –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å Kie.ai –º–∏–Ω–∏–º—É–º –Ω–∞ $5-10 –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

---

## –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL

### –í–∞—Ä–∏–∞–Ω—Ç A: –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install postgresql postgresql-contrib

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–ª—É–∂–±—É
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

### –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
sudo -u postgres psql
```

–í psql –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```sql
CREATE USER ai_melody WITH PASSWORD 'ai_melody';
CREATE DATABASE ai_melody OWNER ai_melody;
GRANT ALL PRIVILEGES ON DATABASE ai_melody TO ai_melody;
\q
```

> [!NOTE]
> –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞.

---

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env

```bash
cd /home/meow/work/telegramMusic
cp .env.example .env
```

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:

```env
# === –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û ===

# –¢–æ–∫–µ–Ω –∏–∑ BotFather (—à–∞–≥ 1)
BOT_TOKEN=7123456789:AAHxxxxxxxxxxxxxxxxxxxxxxxxxxx

# –ö–ª—é—á API –∏–∑ Kie.ai (—à–∞–≥ 2)
SUNO_API_KEY=sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# === –ú–û–ñ–ù–û –û–°–¢–ê–í–ò–¢–¨ –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ ===

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL (—à–∞–≥ 3)
DATABASE_URL=postgresql://ai_melody:ai_melody@localhost:5432/ai_melody

# URL API Suno-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
SUNO_API_URL=https://api.kie.ai

# –õ–∏–º–∏—Ç—ã
MAX_GENERATIONS_PER_HOUR=30
MAX_GENERATIONS_PER_USER_PER_DAY=10
FREE_CREDITS_ON_SIGNUP=2
MIN_ACCOUNT_AGE_HOURS=24
```

---

## –®–∞–≥ 5: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞

```bash
cd /home/meow/work/telegramMusic
source venv/bin/activate
python3 main.py
```

–ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤ –ª–æ–≥–∞—Ö —É–≤–∏–¥–∏—Ç–µ:
```
Bot @ai_melody_bot started (id=1234567890)
```

---

## –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram –ø–æ username
2. –ù–∞–∂–º–∏—Ç–µ **Start** ‚Üí –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å 2 –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º–∏ –∫—Ä–µ–¥–∏—Ç–∞–º–∏
3. –ù–∞–∂–º–∏—Ç–µ **üéµ –°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–∫** ‚Üí –ø—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Å—å —Ñ–ª–æ—É
4. –ù–∞–∂–º–∏—Ç–µ **üí∞ –ö—Ä–µ–¥–∏—Ç—ã** ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ invoice –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ ‚Äî —á—Ç–æ –∑–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç

| –§–∞–π–ª | –ß—Ç–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å | –ó–∞—á–µ–º |
|---|---|---|
| `.env` | –¢–æ–∫–µ–Ω—ã, –∫–ª—é—á–∏, –ª–∏–º–∏—Ç—ã | –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| `app/config.py` | –ü–∞–∫–µ—Ç—ã –∫—Ä–µ–¥–∏—Ç–æ–≤, –¥–µ—Ñ–æ–ª—Ç—ã | –ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—ã, –ª–∏–º–∏—Ç—ã |
| `app/texts.py` | –í—Å–µ —Ç–µ–∫—Å—Ç—ã –±–æ—Ç–∞ | –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ |
| `app/keyboards.py` | –ö–Ω–æ–ø–∫–∏, —Å—Ç–∏–ª–∏ | –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∏–ª–∏, –∫–Ω–æ–ø–∫–∏ |
| `app/suno_api.py` | API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ | –ï—Å–ª–∏ –º–µ–Ω—è–µ—Ç—Å—è API-–ø—Ä–æ–≤–∞–π–¥–µ—Ä |
| `app/database.py` | –°—Ö–µ–º–∞ –ë–î | –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è/—Ç–∞–±–ª–∏—Ü—ã |
| `app/handlers/generation.py` | –õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ | –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–ª–æ—É |
| `app/handlers/payments.py` | –õ–æ–≥–∏–∫–∞ –æ–ø–ª–∞—Ç—ã | –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞–∫–µ—Ç—ã |

---

## –ö–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—ã –∫—Ä–µ–¥–∏—Ç–æ–≤

–í —Ñ–∞–π–ª–µ `app/config.py`, –Ω–∞–π–¥–∏—Ç–µ `credit_packages`:

```python
self.credit_packages = [
    {"credits": 5, "stars": 50, "label": "5üíé ‚Äî ‚≠ê50"},
    {"credits": 15, "stars": 130, "label": "15üíé ‚Äî ‚≠ê130"},
    {"credits": 50, "stars": 400, "label": "50üíé ‚Äî ‚≠ê400"},
    {"credits": 100, "stars": 750, "label": "100üíé ‚Äî ‚≠ê750"},
]
```

---

## –ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å API-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

–ï—Å–ª–∏ —Ä–µ—à–∏—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ —Å Kie.ai –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–∏—Å (musicapi.ai, CometAPI –∏ —Ç.–¥.):

1. –í `.env` –ø–æ–º–µ–Ω—è–π—Ç–µ:
   ```env
   SUNO_API_URL=https://–Ω–æ–≤—ã–π-url-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
   SUNO_API_KEY=–Ω–æ–≤—ã–π-–∫–ª—é—á
   ```

2. –ï—Å–ª–∏ —É –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç API ‚Äî –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `app/suno_api.py`

---

## –í—ã–≤–æ–¥ –∑–∞—Ä–∞–±–æ—Ç–∫–∞

–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ Stars —Å—Ä–µ–¥—Å—Ç–≤–∞ –º–æ–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ [fragment.com](https://fragment.com)
2. –ü—Ä–∏–≤—è–∂–∏—Ç–µ Telegram-–∞–∫–∫–∞—É–Ω—Ç
3. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ Stars ‚Üí Toncoin
4. –í—ã–≤–µ–¥–∏—Ç–µ Toncoin –Ω–∞ –∫–æ—à–µ–ª—ë–∫ –∏–ª–∏ –±–∏—Ä–∂—É

> [!IMPORTANT]
> –î–ª—è –≤—ã–≤–æ–¥–∞ —á–µ—Ä–µ–∑ Fragment –Ω—É–∂–µ–Ω TON-–∫–æ—à–µ–ª—ë–∫ (@wallet –≤ Telegram –∏–ª–∏ –≤–Ω–µ—à–Ω–∏–π).
